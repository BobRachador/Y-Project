{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\umami\\\\Downloads\\\\Y 1.0.8\\\\Telas\\\\Pesquisa.js\",\n  _this = this;\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { firestore } from '../firebase/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar SearchUsers = function SearchUsers() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    searchText = _useState2[0],\n    setSearchText = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    users = _useState4[0],\n    setUsers = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  useEffect(function () {\n    var handleSearch = function () {\n      var _ref = _asyncToGenerator(function* () {\n        if (searchText.trim() === '') {\n          setUsers([]);\n          return;\n        }\n        setLoading(true);\n        try {\n          var userQuery = query(collection(firestore, 'users'), where('nome', '>=', searchText), where('nome', '<=', searchText + \"\\uF8FF\"));\n          var usernameQuery = query(collection(firestore, 'users'), where('username', '>=', searchText), where('username', '<=', searchText + \"\\uF8FF\"));\n          var _yield$Promise$all = yield Promise.all([getDocs(userQuery), getDocs(usernameQuery)]),\n            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2),\n            nameSnapshot = _yield$Promise$all2[0],\n            usernameSnapshot = _yield$Promise$all2[1];\n          var allResults = [].concat(_toConsumableArray(nameSnapshot.docs), _toConsumableArray(usernameSnapshot.docs));\n          var uniqueUsers = Array.from(new Set(allResults.map(function (doc) {\n            return doc.id;\n          }))).map(function (id) {\n            return allResults.find(function (doc) {\n              return doc.id === id;\n            }).data();\n          });\n          setUsers(uniqueUsers);\n        } catch (error) {\n          console.error('Erro ao buscar usuários: ', error);\n          alert('Erro ao buscar usuários.');\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function handleSearch() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    handleSearch();\n  }, [searchText]);\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(Text, {\n      style: styles.title,\n      children: \"Buscar Usu\\xE1rios\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, _this), _jsxDEV(TextInput, {\n      style: styles.input,\n      placeholder: \"Nome ou Username\",\n      value: searchText,\n      onChangeText: setSearchText,\n      placeholderTextColor: \"#999\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, _this), loading ? _jsxDEV(Text, {\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, _this) : _jsxDEV(FlatList, {\n      data: users,\n      keyExtractor: function keyExtractor(item) {\n        return item.uid;\n      },\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsxDEV(View, {\n          style: styles.userItem,\n          children: _jsxDEV(View, {\n            style: {\n              flexDirection: 'row'\n            },\n            children: [_jsxDEV(Text, {\n              style: styles.userName,\n              children: item.nome\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 21\n            }, _this), _jsxDEV(Text, {\n              style: styles.userUsername,\n              children: [\"@\", item.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 24\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, _this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, _this);\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: '#fff'\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 10,\n    padding: 10,\n    marginBottom: 20,\n    backgroundColor: '#f9f9f9'\n  },\n  userItem: {\n    borderBottomWidth: 1,\n    borderBottomColor: '#ccc',\n    paddingVertical: 10\n  },\n  userName: {\n    fontSize: 18\n  },\n  userUsername: {\n    fontSize: 16,\n    color: '#555'\n  }\n});\nexport default SearchUsers;","map":{"version":3,"names":["React","useState","useEffect","View","Text","TextInput","FlatList","TouchableOpacity","StyleSheet","collection","query","where","getDocs","firestore","jsxDEV","_jsxDEV","SearchUsers","_useState","_useState2","_slicedToArray","searchText","setSearchText","_useState3","_useState4","users","setUsers","_useState5","_useState6","loading","setLoading","handleSearch","_ref","_asyncToGenerator","trim","userQuery","usernameQuery","_yield$Promise$all","Promise","all","_yield$Promise$all2","nameSnapshot","usernameSnapshot","allResults","concat","_toConsumableArray","docs","uniqueUsers","Array","from","Set","map","doc","id","find","data","error","console","alert","apply","arguments","style","styles","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","_this","input","placeholder","value","onChangeText","placeholderTextColor","keyExtractor","item","uid","renderItem","_ref2","userItem","flexDirection","userName","nome","userUsername","username","create","flex","padding","backgroundColor","fontSize","fontWeight","marginBottom","borderWidth","borderColor","borderRadius","borderBottomWidth","borderBottomColor","paddingVertical","color"],"sources":["C:/Users/umami/Downloads/Y 1.0.8/Telas/Pesquisa.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, FlatList, TouchableOpacity, StyleSheet } from 'react-native';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { firestore } from '../firebase/config'; // Certifique-se de importar corretamente o Firestore\n\nconst SearchUsers = () => {\n  const [searchText, setSearchText] = useState('');\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    // Faz a consulta quando o input muda\n    const handleSearch = async () => {\n      if (searchText.trim() === '') {\n        setUsers([]); // Limpa os resultados se o input estiver vazio\n        return;\n      }\n\n      setLoading(true);\n\n      try {\n        // Consulta por nome ou username\n        const userQuery = query(\n          collection(firestore, 'users'),\n          where('nome', '>=', searchText),\n          where('nome', '<=', searchText + '\\uf8ff')\n        );\n\n        const usernameQuery = query(\n          collection(firestore, 'users'),\n          where('username', '>=', searchText),\n          where('username', '<=', searchText + '\\uf8ff')\n        );\n\n        const [nameSnapshot, usernameSnapshot] = await Promise.all([\n          getDocs(userQuery),\n          getDocs(usernameQuery),\n        ]);\n\n        // Unifica resultados e remove duplicatas\n        const allResults = [...nameSnapshot.docs, ...usernameSnapshot.docs];\n        const uniqueUsers = Array.from(\n          new Set(allResults.map((doc) => doc.id))\n        ).map((id) => {\n          return allResults.find((doc) => doc.id === id).data();\n        });\n\n        setUsers(uniqueUsers);\n      } catch (error) {\n        console.error('Erro ao buscar usuários: ', error);\n        alert('Erro ao buscar usuários.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    handleSearch();\n  }, [searchText]); // Executa o efeito quando o searchText mudar\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Buscar Usuários</Text>\n\n      <TextInput\n        style={styles.input}\n        placeholder=\"Nome ou Username\"\n        value={searchText}\n        onChangeText={setSearchText} // Atualiza o estado searchText\n        placeholderTextColor=\"#999\"\n      />\n\n      {loading ? (\n        <Text>Carregando...</Text>\n      ) : (\n        <FlatList\n          data={users}\n          keyExtractor={(item) => item.uid}\n          renderItem={({ item }) => (\n            <View style={styles.userItem}>\n                <View style={{flexDirection:'row'}}>\n                    <Text style={styles.userName}>{item.nome}</Text>\n                       <Text style={styles.userUsername}>@{item.username}</Text>\n                </View>\n              \n            </View>\n          )}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: '#fff',\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 10,\n    padding: 10,\n    marginBottom: 20,\n    backgroundColor: '#f9f9f9',\n  },\n  userItem: {\n    borderBottomWidth: 1,\n    borderBottomColor: '#ccc',\n    paddingVertical: 10,\n  },\n  userName: {\n    fontSize: 18,\n  },\n  userUsername: {\n    fontSize: 16,\n    color: '#555',\n  },\n});\n\nexport default SearchUsers;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}